"use strict";angular.module("sandboxFluxApp",["ngAnimate","ngCookies","ngMaterial","ngResource","ngRoute","ngSanitize","ngTouch","chart.js"]).constant("RESOURCES",{API:"http://private-24e9-sandboxflux.apiary-mock.com"}).constant("ACTIONS",{BUTTON_UPDATE:"button-update",POLL_UPDATE:"poll-update"}).config(["$routeProvider",function(a){a.when("/",{templateUrl:"views/main.html",controller:"MainCtrl",controllerAs:"main"}).when("/about",{templateUrl:"views/about.html",controller:"AboutCtrl",controllerAs:"about"}).when("/explore",{templateUrl:"views/explore.html",controller:"ExploreCtrl",controllerAs:"explore"}).otherwise({redirectTo:"/"})}]).config(["$mdThemingProvider",function(a){a.theme("default")}]).config(function(){Parse.initialize("1HjpKS0k6054RdvGjmEwFtCbglfycTkTIqd1k22y","BTXQ11uqQEtihjZAIGMxUr8ZSdVJKXn8KadbC0iJ")}),angular.module("sandboxFluxApp").controller("MainCtrl",["$scope","store","ACTIONS",function(a,b,c){a.pressed=b.pressed,a.pressButton=function(){b.getDispatcher().dispatch({actionType:c.BUTTON_UPDATE})};var d=b.addListener(function(){a.pressed=b.pressed});a.$on("$destroy",function(){d.remove()})}]),angular.module("sandboxFluxApp").controller("AboutCtrl",["$scope","store",function(a,b){a.pressed=b.pressed;var c=b.addListener(function(){a.pressed=b.pressed});a.$on("$destroy",function(){c.remove()})}]),angular.module("sandboxFluxApp").factory("dispatcher",function(){return new Flux.Dispatcher}),angular.module("sandboxFluxApp").factory("store",["$http","$timeout","dispatcher","RESOURCES","ACTIONS",function(a,b,c,d,e){var f=Parse.Object.extend("Poll"),g=[],h=function(a){this.pressed=0,this.polls=[],this.dispatchToken=a.register(this.__handler.bind(this))};h.prototype.addListener=function(a){return g.push(a),this.__createToken(a)},h.prototype.getDispatcher=function(){return c},h.prototype.__handler=function(a){a.actionType===e.BUTTON_UPDATE?this.pressed++:a.actionType===e.POLL_UPDATE&&(this.polls=a.polls),this.__emitChange()},h.prototype.__emitChange=function(){g.forEach(function(a){a()})},h.prototype.__createToken=function(a){var b={};return b.remove=function(){g=g.filter(function(b){return b!==a})},b};var i=new Parse.Query(f);return i.find({success:function(a){b(function(){c.dispatch({actionType:e.POLL_UPDATE,polls:a})})},error:console.error.bind(console)}),new h(c)}]),angular.module("sandboxFluxApp").controller("ExploreCtrl",["$scope","$timeout","store",function(a,b,c){var d=function(){var b=_.first(c.polls);if(b){var d=b.get("choices");a.labels=_.pluck(d,"choice"),a.data=[_.pluck(d,"votes")],a.series=[b.get("question")]}},e=c.addListener(d);a.$on("$destroy",function(){e.remove()}),d()}]),angular.module("sandboxFluxApp").controller("NavigationCtrl",["$scope","$mdSidenav",function(a,b){a.toggleNavigation=_.debounce(function(){b("navigation").toggle()},200)}]),angular.module("sandboxFluxApp").run(["$templateCache",function(a){a.put("views/about.html",'<p>This is the about view.</p> <div class="row"> <h4>Button</h4> <p>The button has been pushed <span ng-bind="pressed"></span> times.</p> </div>'),a.put("views/explore.html",'<p>This is the explore view.</p> <div class="row"> <h4>Chart</h4> <canvas class="chart chart-bar" chart-data="data" chart-labels="labels" chart-series="series" chart-legend="true"></canvas> </div>'),a.put("views/main.html",'<div class="jumbotron"> <h1>\'Allo, \'Allo!</h1> <p class="lead"> <img src="images/yeoman.8cb970fb.png" alt="I\'m Yeoman"><br> Always a pleasure scaffolding your apps. </p> <p><a class="btn btn-lg btn-success" ng-href="#/">Splendid!<span class="glyphicon glyphicon-ok"></span></a></p> </div> <div class="row"> <h4>Button</h4> <md-button class="md-raised md-primary" ng-click="pressButton()" aria-label="The button">Button</md-button> <p>The button has been pushed <span ng-bind="pressed"></span> times.</p> </div>')}]);